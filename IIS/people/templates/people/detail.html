{% extends 'base/detail.html' %}

{% load render_table from django_tables2 %}

{% block detail_table %}
    <tr>
        Последнее изменение произошло {{ object.history.all.first.history_date }},
        {% if object.history.all.first.history_user %}
            {% if object.history.all.first.history_user.get_full_name %}
                выполнено пользователем {{ object.history.all.first.history_user.get_full_name }}
            {% else %}
                выполнено пользователем {{ object.history.all.first.history_user.username }}
            {% endif %}
        {% else %}
            пользователя определить не удалось.
        {% endif %}
    </tr>
    {% for field_name, field_value in fields %}
        <tr>
            <th scope="row">{{ field_name }}</th>
            <td>{{ field_value }}</td>
        </tr>
    {% endfor %}
{% endblock %}
{% block detail_additional %}
    {% for dep in object.get_departments_list %}
        <div><a href="{% url 'departments_detail' dep.pk %}">{{ dep }}</a></div>
    {% endfor %}
    <div style="margin-top: 15px"></div>
    {% for ev in object.get_events_list %}
        <div><a href="{% url 'event_detail' ev.pk %}">{{ ev }}</a></div>
    {% endfor %}
{% endblock %}
